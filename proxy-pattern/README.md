# Proxy Pattern
---
## 정의
실제 기능을 수행하는 객체(Real Object) 대신 가상의 객체(Proxy Object)를 사용해 로직의 흐름을 제어하는 디자인 패턴.

## 특징
- 원래 하려던 기능을 수행하며 그 외의 부가적인 작업(로깅, 인증, 네트워크 통신 등)을 수행하기 좋음
- 비용이 많이 드는 연산(DB 쿼리, 대용량 텍스트 파일 등)을 실제로 필요한 시점에 수행할 수 있음
- 사용자 입장에서는 프록시 객체나 실제 객체나 사용법은 유사하므로 사용성이 좋음

## 클래스 다이어그램
```text
            |---------------|     사용    |------|
            |Object         |<───────────|Client|
            |---------------|            |------|
            |+method()      |
            |---------------|
                    △
                    │구현
        ┌────────────────────────┐
        │                        │
|---------------|         |---------------|
|RealObject     |   위임   |ProxyObject    |
|---------------|<────────|---------------|
|+method()      |         |+method()      |
|---------------|         |---------------|
```
- Real Object, Proxy Object는 동일한 인터페이스를 구현
- Proxy Object 는 메소드 수행 시, 실제 객체(Real Object)의 메소드에 위임

## 프록시의 종류
원격 프록시, 방화벽 프록시, 캐싱 프록시 동기화 프록시 등등 종류가 많지만
가상 프록시(Virtual Proxy)와 보호 프록시(Protection Proxy)에 대해서만 알아보자
[참고](https://developside.tistory.com/80)

## Virtual proxy
- 가상 프록시는 객체의 생성비용이 많이 들어 미리 생성하기 힘든 객체에 대한 접근 및 생성 시점 등을 제어한다.

### 시나리오
```text
나는 이제 보안 전자 서류 전문 업체에 근무하고 있는 개발자이다.
콘솔 프로그램으로 20개씩 난독화된 전자 서류의 본문을 복호화해서 보여주는 프로그램 작성을 하려고 한다.
SecretTextFile 이라는 클래스를 인수 받았고 이 클래스는 수정할 수 없다.
그러나 SecretTextFile 인스턴스를 생성할 때 개당 0.3초라는 시간이 소요된다.
Virtual proxy 패턴을 통해 리팩토링 해보자
```

[소스코드](src/virtual)

## Protection Proxy
- 보호 프록시는 프록시 객체가 실제 객체에 대한 접근을 제어한다.

### 시나리오
```text
인사팀에서 인사정보에 대한 데이터 접근을 직책 단위로 세분화 하려고한다.
기존에는 오로지 인사팀에서만 사용햇던 부분이었으나 최근 인사정보를 직책별로 공개해줘야 하는 경우가 생겼다.
따라서 전삼팀에 근무중인 나는 직책에 따라서 조직원의 인사정보 접근을 제어하는 업무를 수행해야한다.
Protection proxy 패턴을 통해 구현 해보자
```
[소스코드](src/protection)



[출처](https://jdm.kr/blog/235)